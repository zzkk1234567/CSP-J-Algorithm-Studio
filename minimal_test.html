<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal CSP-J Test</title>
    <link href="https://cdn.tailwindcss.com" rel="stylesheet">
</head>
<body class="bg-gray-100 p-8">
    <h1 class="text-2xl font-bold mb-4">CSP-J æœ€å°åŠŸèƒ½æµ‹è¯•</h1>
    
    <!-- çŸ¥è¯†ç‚¹å¯¼èˆªæµ‹è¯• -->
    <div class="bg-white p-4 rounded mb-4">
        <h2 class="text-lg font-bold mb-2">çŸ¥è¯†ç‚¹å¯¼èˆªæµ‹è¯•</h2>
        <div id="knowledge-nav" class="space-y-2">
            <!-- è¿™é‡Œåº”è¯¥åŠ¨æ€ç”Ÿæˆå†…å®¹ -->
        </div>
        <button onclick="testKnowledgeNav()" class="bg-blue-500 text-white px-4 py-2 rounded mt-2">æµ‹è¯•çŸ¥è¯†ç‚¹å¯¼èˆª</button>
    </div>
    
    <!-- ä»£ç ç¼–è¾‘å™¨æµ‹è¯• -->
    <div class="bg-white p-4 rounded mb-4">
        <h2 class="text-lg font-bold mb-2">ä»£ç ç¼–è¾‘å™¨æµ‹è¯•</h2>
        <select id="code-template" onchange="testLoadTemplate()" class="w-full p-2 border rounded mb-2">
            <option value="">é€‰æ‹©æ¨¡æ¿</option>
            <option value="hello">Hello World</option>
        </select>
        <textarea id="code-editor" class="w-full p-2 border rounded" rows="5">// ä»£ç å°†åœ¨è¿™é‡Œæ˜¾ç¤º</textarea>
        <button onclick="testRunCode()" class="bg-green-500 text-white px-4 py-2 rounded mt-2">è¿è¡Œä»£ç </button>
        <div id="code-output" class="bg-gray-800 text-green-400 p-2 rounded mt-2">è¾“å‡ºå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
    </div>
    
    <!-- ç®—æ³•å¯è§†åŒ–æµ‹è¯• -->
    <div class="bg-white p-4 rounded mb-4">
        <h2 class="text-lg font-bold mb-2">ç®—æ³•å¯è§†åŒ–æµ‹è¯•</h2>
        <select id="algorithm-select" onchange="testShowViz()" class="w-full p-2 border rounded mb-2">
            <option value="">é€‰æ‹©ç®—æ³•</option>
            <option value="bubble-sort">å†’æ³¡æ’åº</option>
        </select>
        <div id="algorithm-visualization" class="bg-gray-800 text-white p-4 rounded">é€‰æ‹©ç®—æ³•æŸ¥çœ‹æ¼”ç¤º</div>
        <button onclick="testStartViz()" class="bg-purple-500 text-white px-4 py-2 rounded mt-2">å¼€å§‹æ¼”ç¤º</button>
    </div>
    
    <!-- æµ‹è¯•ç»“æœ -->
    <div class="bg-white p-4 rounded">
        <h2 class="text-lg font-bold mb-2">æµ‹è¯•ç»“æœ</h2>
        <div id="test-results" class="space-y-1"></div>
    </div>

    <script>
        // ç®€åŒ–çš„æµ‹è¯•æ•°æ®
        const knowledgeData = {
            'basics': {
                title: 'ğŸ å…¥é—¨åŸºç¡€',
                content: '<h3>æµ‹è¯•å†…å®¹</h3><p>è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å†…å®¹ã€‚</p>'
            }
        };
        
        const codeTemplates = {
            hello: `#include <iostream>
using namespace std;

int main() {
    cout << "Hello, CSP-J!" << endl;
    return 0;
}`
        };
        
        // æµ‹è¯•ç»“æœè®°å½•
        function logResult(message, success = true) {
            console.log(message);
            const resultsDiv = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = `p-2 rounded ${success ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`;
            div.textContent = new Date().toLocaleTimeString() + ': ' + message;
            resultsDiv.appendChild(div);
        }
        
        // æµ‹è¯•çŸ¥è¯†ç‚¹å¯¼èˆª
        function testKnowledgeNav() {
            try {
                logResult('æµ‹è¯•çŸ¥è¯†ç‚¹å¯¼èˆªåŠŸèƒ½...');
                const navContainer = document.getElementById('knowledge-nav');
                
                if (!navContainer) {
                    logResult('é”™è¯¯ï¼šæ‰¾ä¸åˆ° knowledge-nav å…ƒç´ ', false);
                    return;
                }
                
                navContainer.innerHTML = '';
                
                Object.keys(knowledgeData).forEach(key => {
                    const topic = knowledgeData[key];
                    const navItem = document.createElement('div');
                    navItem.className = 'p-2 bg-gray-100 rounded cursor-pointer hover:bg-gray-200';
                    navItem.textContent = topic.title;
                    navItem.onclick = () => {
                        logResult(`ç‚¹å‡»äº†çŸ¥è¯†ç‚¹: ${topic.title}`);
                    };
                    navContainer.appendChild(navItem);
                });
                
                logResult('âœ“ çŸ¥è¯†ç‚¹å¯¼èˆªç”ŸæˆæˆåŠŸ');
            } catch (error) {
                logResult('âœ— çŸ¥è¯†ç‚¹å¯¼èˆªé”™è¯¯: ' + error.message, false);
            }
        }
        
        // æµ‹è¯•ä»£ç æ¨¡æ¿åŠ è½½
        function testLoadTemplate() {
            try {
                logResult('æµ‹è¯•ä»£ç æ¨¡æ¿åŠ è½½...');
                const select = document.getElementById('code-template');
                const textarea = document.getElementById('code-editor');
                
                if (!select || !textarea) {
                    logResult('é”™è¯¯ï¼šæ‰¾ä¸åˆ°å¿…è¦å…ƒç´ ', false);
                    return;
                }
                
                const template = codeTemplates[select.value];
                if (template) {
                    textarea.value = template;
                    logResult('âœ“ ä»£ç æ¨¡æ¿åŠ è½½æˆåŠŸ');
                } else {
                    logResult('æ²¡æœ‰é€‰æ‹©æ¨¡æ¿');
                }
            } catch (error) {
                logResult('âœ— ä»£ç æ¨¡æ¿åŠ è½½é”™è¯¯: ' + error.message, false);
            }
        }
        
        // æµ‹è¯•ä»£ç è¿è¡Œ
        function testRunCode() {
            try {
                logResult('æµ‹è¯•ä»£ç è¿è¡Œ...');
                const textarea = document.getElementById('code-editor');
                const outputDiv = document.getElementById('code-output');
                
                if (!textarea || !outputDiv) {
                    logResult('é”™è¯¯ï¼šæ‰¾ä¸åˆ°å¿…è¦å…ƒç´ ', false);
                    return;
                }
                
                const code = textarea.value.trim();
                if (!code) {
                    outputDiv.textContent = 'è¯·å…ˆè¾“å…¥æˆ–é€‰æ‹©ä»£ç æ¨¡æ¿';
                    logResult('æç¤ºï¼šéœ€è¦è¾“å…¥ä»£ç ');
                    return;
                }
                
                // ç®€å•æ¨¡æ‹Ÿè¿è¡Œç»“æœ
                if (code.includes('Hello')) {
                    outputDiv.textContent = 'Hello, CSP-J!';
                    logResult('âœ“ ä»£ç è¿è¡Œæ¨¡æ‹ŸæˆåŠŸ');
                } else {
                    outputDiv.textContent = 'ç¨‹åºæ‰§è¡Œå®Œæˆ';
                    logResult('âœ“ ä»£ç è¿è¡Œå®Œæˆ');
                }
                
            } catch (error) {
                logResult('âœ— ä»£ç è¿è¡Œé”™è¯¯: ' + error.message, false);
            }
        }
        
        // æµ‹è¯•ç®—æ³•å¯è§†åŒ–æ˜¾ç¤º
        function testShowViz() {
            try {
                logResult('æµ‹è¯•ç®—æ³•å¯è§†åŒ–æ˜¾ç¤º...');
                const select = document.getElementById('algorithm-select');
                const vizArea = document.getElementById('algorithm-visualization');
                
                if (!select || !vizArea) {
                    logResult('é”™è¯¯ï¼šæ‰¾ä¸åˆ°å¿…è¦å…ƒç´ ', false);
                    return;
                }
                
                if (select.value === 'bubble-sort') {
                    vizArea.innerHTML = `
                        <div class="text-center mb-2">
                            <h4 class="font-bold">å†’æ³¡æ’åºæ¼”ç¤º</h4>
                        </div>
                        <div class="flex justify-center space-x-1">
                            <div class="w-8 h-16 bg-blue-500 flex items-end justify-center text-xs text-white">64</div>
                            <div class="w-8 h-8 bg-blue-500 flex items-end justify-center text-xs text-white">34</div>
                            <div class="w-8 h-6 bg-blue-500 flex items-end justify-center text-xs text-white">25</div>
                        </div>
                    `;
                    logResult('âœ“ ç®—æ³•å¯è§†åŒ–å†…å®¹æ˜¾ç¤ºæˆåŠŸ');
                } else {
                    vizArea.textContent = 'é€‰æ‹©ç®—æ³•æŸ¥çœ‹æ¼”ç¤º';
                    logResult('æ²¡æœ‰é€‰æ‹©ç®—æ³•');
                }
                
            } catch (error) {
                logResult('âœ— ç®—æ³•å¯è§†åŒ–æ˜¾ç¤ºé”™è¯¯: ' + error.message, false);
            }
        }
        
        // æµ‹è¯•ç®—æ³•å¯è§†åŒ–åŠ¨ç”»
        function testStartViz() {
            try {
                logResult('æµ‹è¯•ç®—æ³•å¯è§†åŒ–åŠ¨ç”»...');
                const select = document.getElementById('algorithm-select');
                
                if (!select || !select.value) {
                    logResult('è¯·å…ˆé€‰æ‹©ç®—æ³•', false);
                    return;
                }
                
                logResult('âœ“ å¼€å§‹ç®—æ³•åŠ¨ç”»æ¼”ç¤º');
                // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„åŠ¨ç”»é€»è¾‘
                
            } catch (error) {
                logResult('âœ— ç®—æ³•å¯è§†åŒ–åŠ¨ç”»é”™è¯¯: ' + error.message, false);
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            logResult('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹è‡ªåŠ¨æµ‹è¯•...');
            logResult('JavaScript æ‰§è¡Œæ­£å¸¸');
            logResult('DOM å…ƒç´ å¯è®¿é—®');
            
            // è‡ªåŠ¨æµ‹è¯•çŸ¥è¯†ç‚¹å¯¼èˆª
            setTimeout(() => {
                testKnowledgeNav();
            }, 500);
        });
        
        // å…¨å±€å‡½æ•°æš´éœ²ï¼ˆç”¨äº HTML onclickï¼‰
        window.testKnowledgeNav = testKnowledgeNav;
        window.testLoadTemplate = testLoadTemplate;
        window.testRunCode = testRunCode;
        window.testShowViz = testShowViz;
        window.testStartViz = testStartViz;
        
    </script>
</body>
</html>