<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ† CSP-J å®Œæ•´å¤‡è€ƒå­¦ä¹ åŠ©æ‰‹</title>
    <link href="https://cdn.tailwindcss.com" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <style>
        .code-font { font-family: 'Fira Code', 'Consolas', monospace; }
        .detective { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            width: 80px;
            height: 80px;
            position: relative;
        }
        .detective::before {
            content: "ğŸ•µï¸";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.5rem;
        }
        .speech-bubble {
            position: relative;
            background: white;
            border-radius: 20px;
            padding: 15px;
            margin-left: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .speech-bubble::before {
            content: '';
            position: absolute;
            left: -10px;
            top: 20px;
            width: 0;
            height: 0;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
            border-right: 10px solid white;
        }
        .algorithm-viz {
            min-height: 200px;
            background: #1e293b;
            border-radius: 8px;
            padding: 20px;
            color: white;
            font-family: monospace;
        }
        .array-bar {
            display: inline-block;
            width: 30px;
            margin: 2px;
            text-align: center;
            color: white;
            font-weight: bold;
            transition: all 0.5s ease;
        }
        .tab-active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .topic-completed {
            background: linear-gradient(45deg, #10b981, #34d399);
            color: white;
        }
        .quiz-option:hover {
            background-color: #e5e7eb;
        }
        .quiz-correct {
            background-color: #dcfce7 !important;
            border-color: #16a34a;
        }
        .quiz-incorrect {
            background-color: #fef2f2 !important;
            border-color: #dc2626;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2">
                    <span class="text-2xl">ğŸ†</span>
                    <h1 class="text-xl font-bold text-gray-800">CSP-J å®Œæ•´å¤‡è€ƒå­¦ä¹ åŠ©æ‰‹</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="bg-blue-100 px-3 py-1 rounded-full">
                        <span class="text-sm text-blue-800">å­¦ä¹ è¿›åº¦: <span id="overall-progress">0%</span></span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-6">
        <div class="flex items-center mb-6">
            <div class="detective"></div>
            <div class="speech-bubble flex-1">
                <p id="detective-message" class="text-gray-700 font-medium">
                    ğŸ¯ æ¬¢è¿æ¥åˆ°CSP-Jå®Œæ•´å­¦ä¹ ä¸–ç•Œï¼æˆ‘æ˜¯ä½ çš„ä»£ç å°ä¾¦æ¢ï¼Œè¿™é‡ŒåŒ…å«äº†æ‰€æœ‰CSP-Jè€ƒè¯•å¿…å¤‡çŸ¥è¯†ç‚¹ï¼
                </p>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4">
        <div class="flex bg-white rounded-lg shadow-md mb-6 overflow-hidden">
            <button onclick="switchTab('knowledge')" id="tab-knowledge" class="tab-active px-6 py-3 font-medium flex-1 transition-all">
                ğŸ“š å®Œæ•´çŸ¥è¯†ç‚¹
            </button>
            <button onclick="switchTab('practice')" id="tab-practice" class="px-6 py-3 font-medium flex-1 transition-all hover:bg-gray-50">
                ğŸ’» ç¼–ç¨‹ç»ƒä¹ 
            </button>
            <button onclick="switchTab('interactive')" id="tab-interactive" class="px-6 py-3 font-medium flex-1 transition-all hover:bg-gray-50">
                ğŸ® ç®—æ³•å¯è§†åŒ–
            </button>
            <button onclick="switchTab('test')" id="tab-test" class="px-6 py-3 font-medium flex-1 transition-all hover:bg-gray-50">
                ğŸ“ å†å¹´çœŸé¢˜
            </button>
        </div>
    </div>

    <main class="container mx-auto px-4 pb-10">
        <!-- çŸ¥è¯†è®²è§£åŒº -->
        <div id="content-knowledge" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">ğŸ“‹ CSP-Jå®Œæ•´çŸ¥è¯†ä½“ç³»</h3>
                        <div class="space-y-2" id="knowledge-nav">
                            <!-- åŠ¨æ€ç”Ÿæˆå®Œæ•´çŸ¥è¯†ç‚¹å¯¼èˆª -->
                        </div>
                    </div>
                </div>
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <div id="knowledge-content">
                            <h2 class="text-2xl font-bold text-gray-800 mb-4">CSP-J å®Œæ•´çŸ¥è¯†ä½“ç³»</h2>
                            <p class="text-gray-600 mb-4">é€‰æ‹©å·¦ä¾§çŸ¥è¯†ç‚¹æŸ¥çœ‹è¯¦ç»†è®²è§£ã€çœŸé¢˜è§£æå’Œä»£ç ç¤ºä¾‹ã€‚</p>
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-bold text-blue-800 mb-2">æœ¬å·¥å…·åŒ…å«ï¼š</h4>
                                <ul class="text-blue-700 space-y-1">
                                    <li>â€¢ 8å¤§æ ¸å¿ƒçŸ¥è¯†æ¨¡å—</li>
                                    <li>â€¢ 50+å†å¹´çœŸé¢˜è¯¦è§£</li>
                                    <li>â€¢ å®Œæ•´ä»£ç ç¤ºä¾‹</li>
                                    <li>â€¢ ç®—æ³•å¯è§†åŒ–æ¼”ç¤º</li>
                                    <li>â€¢ æ¨¡æ‹Ÿè€ƒè¯•ç³»ç»Ÿ</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å…¶ä»–æ ‡ç­¾é¡µå†…å®¹ä¿æŒç®€æ´ï¼Œå› ä¸ºtokensé™åˆ¶ -->
        <div id="content-practice" class="tab-content hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">ğŸ’» ä»£ç ç¼–è¾‘å™¨</h3>
                    <div class="mb-4">
                        <select id="code-template" onchange="loadCodeTemplate()" class="w-full p-2 border rounded-md">
                            <option value="">é€‰æ‹©ä»£ç æ¨¡æ¿</option>
                            <option value="hello">Hello World</option>
                            <option value="input">è¾“å…¥è¾“å‡º</option>
                            <option value="array">æ•°ç»„æ“ä½œ</option>
                            <option value="function">å‡½æ•°å®šä¹‰</option>
                            <option value="recursion">é€’å½’ç¤ºä¾‹</option>
                            <option value="file_io">æ–‡ä»¶æ“ä½œ</option>
                            <option value="binary_search">äºŒåˆ†æŸ¥æ‰¾</option>
                            <option value="bubble_sort">å†’æ³¡æ’åº</option>
                        </select>
                    </div>
                    <textarea id="code-editor" class="w-full code-font h-64 p-3 border rounded">#include <iostream>
using namespace std;

int main() {
    cout << "Hello, CSP-J!" << endl;
    return 0;
}</textarea>
                    <div class="mt-4 flex gap-2">
                        <button onclick="runCode()" class="bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600">
                            â–¶ï¸ è¿è¡Œä»£ç 
                        </button>
                        <button onclick="clearCode()" class="bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600">
                            ğŸ—‘ï¸ æ¸…ç©ºä»£ç 
                        </button>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">ğŸ“¤ è¿è¡Œç»“æœ</h3>
                    <div id="code-output" class="bg-gray-900 text-green-400 p-4 rounded-md code-font min-h-[200px]">
                        ç‚¹å‡»"è¿è¡Œä»£ç "æŸ¥çœ‹ç»“æœ...
                    </div>
                </div>
            </div>
        </div>

        <div id="content-interactive" class="tab-content hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">ğŸ¯ ç®—æ³•å¯è§†åŒ–</h3>
                    <div class="mb-4">
                        <select id="algorithm-select" onchange="showAlgorithmViz()" class="w-full p-2 border rounded-md">
                            <option value="">é€‰æ‹©ç®—æ³•æ¼”ç¤º</option>
                            <option value="bubble-sort">å†’æ³¡æ’åº</option>
                            <option value="selection-sort">é€‰æ‹©æ’åº</option>
                            <option value="binary-search">äºŒåˆ†æŸ¥æ‰¾</option>
                            <option value="linear-search">çº¿æ€§æŸ¥æ‰¾</option>
                            <option value="factorial">é€’å½’é˜¶ä¹˜</option>
                        </select>
                    </div>
                    <div id="algorithm-visualization" class="algorithm-viz">
                        é€‰æ‹©ç®—æ³•æŸ¥çœ‹å¯è§†åŒ–æ¼”ç¤º...
                    </div>
                    <div class="mt-4 flex gap-2">
                        <button onclick="startVisualization()" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600">
                            â–¶ï¸ å¼€å§‹æ¼”ç¤º
                        </button>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">ğŸ§© ä»£ç å—æ‹¼æ¥</h3>
                    <div id="drag-drop-area" class="border-2 border-dashed border-gray-300 p-4 rounded-md min-h-[200px] mb-4">
                        <div class="text-center text-gray-500 py-8">
                            å°†ä»£ç å—æ‹–æ‹½åˆ°è¿™é‡Œ
                        </div>
                    </div>
                    <div id="code-blocks" class="grid grid-cols-2 gap-2">
                        <!-- åŠ¨æ€ç”Ÿæˆä»£ç å— -->
                    </div>
                </div>
            </div>
        </div>

        <div id="content-test" class="tab-content hidden">
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-lg font-bold text-gray-800">ğŸ“ CSP-J å†å¹´çœŸé¢˜æµ‹è¯•</h3>
                    <div class="text-right">
                        <div class="text-2xl font-bold text-red-500" id="test-timer">15:00</div>
                        <div class="text-sm text-gray-500">å‰©ä½™æ—¶é—´</div>
                    </div>
                </div>
                <div id="test-area">
                    <div class="text-center py-8">
                        <p class="text-gray-600 mb-4">å‡†å¤‡å¥½å‚åŠ CSP-Jå†å¹´çœŸé¢˜æµ‹è¯•äº†å—ï¼Ÿ</p>
                        <p class="text-sm text-gray-500 mb-6">åŒ…å«2019-2024å¹´çœŸé¢˜ï¼Œæ¶µç›–æ‰€æœ‰è€ƒç‚¹</p>
                        <button onclick="startTest()" class="bg-red-500 text-white px-6 py-3 rounded-md hover:bg-red-600">
                            ğŸš€ å¼€å§‹æµ‹è¯•
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-white shadow-lg mt-10">
        <div class="container mx-auto px-4 py-6">
            <div class="grid grid-cols-4 gap-6 text-center">
                <div>
                    <div class="text-2xl font-bold text-blue-600" id="mastered-count">0</div>
                    <div class="text-sm text-gray-600">å·²æŒæ¡çŸ¥è¯†ç‚¹</div>
                </div>
                <div>
                    <div class="text-2xl font-bold text-green-600" id="practice-count">0</div>
                    <div class="text-sm text-gray-600">å®Œæˆç»ƒä¹ é¢˜</div>
                </div>
                <div>
                    <div class="text-2xl font-bold text-purple-600" id="accuracy-rate">0%</div>
                    <div class="text-sm text-gray-600">æ­£ç¡®ç‡</div>
                </div>
                <div>
                    <div class="text-2xl font-bold text-orange-600" id="study-time">0</div>
                    <div class="text-sm text-gray-600">å­¦ä¹ æ—¶é•¿(åˆ†é’Ÿ)</div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js"></script>

    <script>
        // å…¨å±€çŠ¶æ€
        let gameState = {
            currentTab: 'knowledge',
            progress: {
                masteredTopics: new Set(),
                completedPractices: 0,
                correctAnswers: 0,
                totalAnswers: 0
            }
        };

        // å¼•å…¥å¤–éƒ¨æ•°æ®æ–‡ä»¶ï¼ˆå®é™…ä½¿ç”¨æ—¶å¯ä»¥è¿™æ ·åŠ è½½ï¼‰
        // è¿™é‡Œç›´æ¥åµŒå…¥å®Œæ•´çš„çŸ¥è¯†ä½“ç³»æ•°æ®
        
        // å…¨å±€çŠ¶æ€
        let gameState = {
            currentTab: 'knowledge',
            progress: {
                masteredTopics: new Set(),
                completedPractices: 0,
                correctAnswers: 0,
                totalAnswers: 0,
                studyStartTime: Date.now()
            },
            currentTest: null
        };

        // å®Œæ•´CSP-JçŸ¥è¯†ä½“ç³»æ•°æ®